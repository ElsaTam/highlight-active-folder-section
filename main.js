/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FolderHighlighter
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  highlightedFolderColor: "#eeeeee",
  highlightedFolderTitleColor: "#ee2334af",
  highlightedFolderTextColor: "#000000",
  highlightParentFolder: false,
  highlightedParentFolderColor: "#dddddd",
  highlightedParentFolderTextColor: "#000000"
};
var FolderHighlighter = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.styleEl = null;
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new FolderHighlighterSettingTab(this.app, this));
    this.updateStyles();
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        this.highlightFolders();
      })
    );
    this.app.workspace.onLayoutReady(() => {
      this.highlightFolders();
      this.updateStyles();
      setTimeout(() => {
        this.updateStyles();
        this.highlightFolders();
      }, 500);
    });
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.updateStyles();
  }
  highlightFolders() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile)
      return;
    const allFolders = document.querySelectorAll(".nav-folder");
    allFolders.forEach((folder) => {
      folder.classList.remove("highlighted-folder", "highlighted-parent-folder");
    });
    const currentFolder = this.getParentFolderElement(activeFile.path);
    if (currentFolder) {
      currentFolder.classList.add("highlighted-folder");
      if (this.settings.highlightParentFolder) {
        const rootFolder = this.getRootFolderInPath(activeFile.path);
        if (rootFolder && rootFolder !== currentFolder) {
          rootFolder.classList.add("highlighted-parent-folder");
        }
      }
    }
  }
  getParentFolderElement(filePath) {
    const folderPaths = filePath.split("/");
    folderPaths.pop();
    let folderElement = null;
    while (folderPaths.length > 0) {
      const folderName = folderPaths.join("/");
      const possibleFolderElement = document.querySelector(`[data-path="${folderName}"]`);
      if (possibleFolderElement) {
        folderElement = possibleFolderElement.closest(".nav-folder");
        break;
      }
      folderPaths.pop();
    }
    return folderElement;
  }
  getRootFolderInPath(filePath) {
    var _a;
    const folderPaths = filePath.split("/");
    folderPaths.pop();
    if (folderPaths.length > 0) {
      const rootFolderName = folderPaths[0];
      return ((_a = document.querySelector(`[data-path="${rootFolderName}"]`)) == null ? void 0 : _a.closest(".nav-folder")) || null;
    }
    return null;
  }
  updateStyles() {
    if (!this.styleEl) {
      this.styleEl = document.createElement("style");
      this.styleEl.id = "folder-highlighter-styles";
      document.head.appendChild(this.styleEl);
    }
    this.styleEl.innerHTML = `
            .highlighted-folder {
                background-color: ${this.settings.highlightedFolderColor} !important;
            }
            .highlighted-folder > .nav-folder-title {
                background-color: ${this.settings.highlightedFolderTitleColor} !important;
            }
			.highlighted-folder > .nav-folder-title {
				color: ${this.settings.highlightedFolderTextColor} !important;
			}
            .highlighted-parent-folder {
                background-color: ${this.settings.highlightedParentFolderColor} !important;
            }
			.highlighted-parent-folder > .nav-folder-title {
				color: ${this.settings.highlightedParentFolderTextColor} !important;
			}
        `;
  }
  onunload() {
    if (this.styleEl) {
      this.styleEl.remove();
    }
  }
};
var FolderHighlighterSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Folder Highlighter Settings" });
    const createColorSetting = (name, desc, key) => {
      let savedColor = this.plugin.settings[key];
      let alphaValue = 1;
      const match = savedColor.match(/rgba\((\d+), (\d+), (\d+), ([\d.]+)\)/);
      if (match) {
        alphaValue = parseFloat(match[4]);
      }
      new import_obsidian.Setting(containerEl).setName(name).setDesc(desc).addText((text) => {
        var _a, _b, _c;
        text.setPlaceholder("#eeeeee").setValue(savedColor.toString()).onChange(async (value) => {
          this.plugin.settings[key] = value;
          await this.plugin.saveSettings();
        });
        text.inputEl.style.width = "150px";
        const colorPicker = document.createElement("input");
        colorPicker.type = "color";
        const rgbColor = this.extractRgbFromRgba(savedColor.toString());
        colorPicker.value = this.rgbToHex(rgbColor);
        colorPicker.title = "Choose a color";
        colorPicker.addEventListener("input", async (event) => {
          const value = event.target.value;
          const rgb = this.hexToRgb(value);
          this.plugin.settings[key] = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${alphaValue})`;
          await this.plugin.saveSettings();
          text.setValue(this.plugin.settings[key]);
        });
        (_a = text.inputEl.parentElement) == null ? void 0 : _a.appendChild(colorPicker);
        const transparencySlider = document.createElement("input");
        transparencySlider.type = "range";
        transparencySlider.min = "0";
        transparencySlider.max = "1";
        transparencySlider.step = "0.01";
        transparencySlider.value = alphaValue.toString();
        transparencySlider.style.marginLeft = "10px";
        transparencySlider.title = "Move the slider to adjust transparency";
        transparencySlider.addEventListener("input", async (event) => {
          alphaValue = parseFloat(event.target.value);
          const rgb = this.hexToRgb(colorPicker.value);
          this.plugin.settings[key] = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${alphaValue})`;
          await this.plugin.saveSettings();
          text.setValue(this.plugin.settings[key]);
        });
        (_b = text.inputEl.parentElement) == null ? void 0 : _b.appendChild(transparencySlider);
        const resetButton = document.createElement("button");
        resetButton.textContent = "Reset";
        resetButton.title = "Reset to previous color";
        resetButton.style.marginLeft = "10px";
        resetButton.addEventListener("click", async () => {
          this.plugin.settings[key] = savedColor;
          await this.plugin.saveSettings();
          const rgbColor2 = this.extractRgbFromRgba(savedColor.toString());
          colorPicker.value = this.rgbToHex(rgbColor2);
          const alpha = this.extractAlphaFromRgba(savedColor.toString());
          transparencySlider.value = alpha.toString();
          text.setValue(savedColor.toString());
        });
        (_c = text.inputEl.parentElement) == null ? void 0 : _c.appendChild(resetButton);
      });
    };
    createColorSetting("Highlighted Folder Color", "Choose a background-color of the active folder-container.", "highlightedFolderColor");
    createColorSetting("Highlighted Folder Title Color", "Choose a background-color for the closest folder.", "highlightedFolderTitleColor");
    createColorSetting("Highlighted Folder Text Color", "Choose a color for the highlighted folder text.", "highlightedFolderTextColor");
    new import_obsidian.Setting(containerEl).setName("Highlight Parent Folder").setDesc("Enable highlighting of the root folder segment in the path to the active note.").addToggle((toggle) => toggle.setValue(this.plugin.settings.highlightParentFolder).onChange(async (value) => {
      this.plugin.settings.highlightParentFolder = value;
      await this.plugin.saveSettings();
      this.display();
    }));
    if (this.plugin.settings.highlightParentFolder) {
      createColorSetting("Parent Folder Color", "Choose a background-color of the root folder segment.", "highlightedParentFolderColor");
      createColorSetting("Parent Folder Text Color", "Choose a color for the highlighted parent folder text.", "highlightedParentFolderTextColor");
    }
  }
  // Helper function to convert hex color to RGB
  hexToRgb(hex) {
    const bigint = parseInt(hex.slice(1), 16);
    const r = bigint >> 16 & 255;
    const g = bigint >> 8 & 255;
    const b = bigint & 255;
    return { r, g, b };
  }
  // Helper function to extract RGB values from RGBA string
  extractRgbFromRgba(rgba) {
    const match = rgba.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);
    if (match) {
      return {
        r: parseInt(match[1]),
        g: parseInt(match[2]),
        b: parseInt(match[3])
      };
    }
    return { r: 0, g: 0, b: 0 };
  }
  // Helper function to extract alpha value from RGBA string
  extractAlphaFromRgba(rgba) {
    const match = rgba.match(/rgba?\(.*?,\s*([\d.]+)\)/);
    return match ? parseFloat(match[1]) : 1;
  }
  // Helper function to convert RGB to HEX
  rgbToHex(rgb) {
    return "#" + ((1 << 24) + (rgb.r << 16) + (rgb.g << 8) + rgb.b).toString(16).slice(1);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbnRlcmZhY2UgRm9sZGVySGlnaGxpZ2h0ZXJTZXR0aW5ncyB7XHJcbiAgICBoaWdobGlnaHRlZEZvbGRlckNvbG9yOiBzdHJpbmc7XHJcbiAgICBoaWdobGlnaHRlZEZvbGRlclRpdGxlQ29sb3I6IHN0cmluZztcclxuXHRoaWdobGlnaHRlZEZvbGRlclRleHRDb2xvcjogc3RyaW5nO1xyXG4gICAgaGlnaGxpZ2h0UGFyZW50Rm9sZGVyOiBib29sZWFuO1xyXG4gICAgaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJDb2xvcjogc3RyaW5nO1xyXG5cdGhpZ2hsaWdodGVkUGFyZW50Rm9sZGVyVGV4dENvbG9yOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEZvbGRlckhpZ2hsaWdodGVyU2V0dGluZ3MgPSB7XHJcbiAgICBoaWdobGlnaHRlZEZvbGRlckNvbG9yOiAnI2VlZWVlZScsXHJcbiAgICBoaWdobGlnaHRlZEZvbGRlclRpdGxlQ29sb3I6ICcjZWUyMzM0YWYnLFxyXG5cdGhpZ2hsaWdodGVkRm9sZGVyVGV4dENvbG9yOiAnIzAwMDAwMCcsXHJcbiAgICBoaWdobGlnaHRQYXJlbnRGb2xkZXI6IGZhbHNlLFxyXG4gICAgaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJDb2xvcjogJyNkZGRkZGQnLFxyXG5cdGhpZ2hsaWdodGVkUGFyZW50Rm9sZGVyVGV4dENvbG9yOiAnIzAwMDAwMCcsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb2xkZXJIaWdobGlnaHRlciBleHRlbmRzIFBsdWdpbiB7XHJcbiAgICBzZXR0aW5nczogRm9sZGVySGlnaGxpZ2h0ZXJTZXR0aW5ncztcclxuICAgIHByaXZhdGUgc3R5bGVFbDogSFRNTFN0eWxlRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEZvbGRlckhpZ2hsaWdodGVyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuICAgICAgICAvLyBBcHBseSBzdHlsZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgbG9hZGluZ1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XHJcblxyXG4gICAgICAgIC8vIFJlZ2lzdGVyIGV2ZW50IHRvIHVwZGF0ZSB0aGUgaGlnaGxpZ2h0ZWQgZm9sZGVyIHdoZW4gdGhlIGFjdGl2ZSBub3RlIGNoYW5nZXNcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImFjdGl2ZS1sZWFmLWNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEZvbGRlcnMoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBIaWdobGlnaHQgdGhlIHBhcmVudCBmb2xkZXIgYW5kIGFwcGx5IHN0eWxlcyB3aGVuIHRoZSBsYXlvdXQgaXMgcmVhZHlcclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0Rm9sZGVycygpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGEgc2hvcnQgdGltZW91dCB0byBlbnN1cmUgc3R5bGVzIGFyZSBhcHBsaWVkIGFmdGVyIGV2ZXJ5dGhpbmcgaXMgbG9hZGVkXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdHlsZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0Rm9sZGVycygpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZ2hsaWdodEZvbGRlcnMoKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBhbGwgcHJldmlvdXMgaGlnaGxpZ2h0c1xyXG4gICAgICAgIGNvbnN0IGFsbEZvbGRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdi1mb2xkZXJcIik7XHJcbiAgICAgICAgYWxsRm9sZGVycy5mb3JFYWNoKChmb2xkZXIpID0+IHtcclxuICAgICAgICAgICAgZm9sZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdobGlnaHRlZC1mb2xkZXJcIiwgXCJoaWdobGlnaHRlZC1wYXJlbnQtZm9sZGVyXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBIaWdobGlnaHQgdGhlIGZvbGRlciBjb250YWluaW5nIHRoZSBhY3RpdmUgbm90ZVxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRGb2xkZXIgPSB0aGlzLmdldFBhcmVudEZvbGRlckVsZW1lbnQoYWN0aXZlRmlsZS5wYXRoKTtcclxuICAgICAgICBpZiAoY3VycmVudEZvbGRlcikge1xyXG4gICAgICAgICAgICBjdXJyZW50Rm9sZGVyLmNsYXNzTGlzdC5hZGQoXCJoaWdobGlnaHRlZC1mb2xkZXJcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRQYXJlbnRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIEhpZ2hsaWdodCB0aGUgcm9vdCBmb2xkZXIgaW4gdGhlIHBhdGggdG8gdGhlIGFjdGl2ZSBub3RlXHJcbiAgICAgICAgICAgICAgICBjb25zdCByb290Rm9sZGVyID0gdGhpcy5nZXRSb290Rm9sZGVySW5QYXRoKGFjdGl2ZUZpbGUucGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm9vdEZvbGRlciAmJiByb290Rm9sZGVyICE9PSBjdXJyZW50Rm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdEZvbGRlci5jbGFzc0xpc3QuYWRkKFwiaGlnaGxpZ2h0ZWQtcGFyZW50LWZvbGRlclwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRQYXJlbnRGb2xkZXJFbGVtZW50KGZpbGVQYXRoOiBzdHJpbmcpOiBFbGVtZW50IHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aHMgPSBmaWxlUGF0aC5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgZm9sZGVyUGF0aHMucG9wKCk7XHJcbiAgICAgICAgbGV0IGZvbGRlckVsZW1lbnQ6IEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGZvbGRlclBhdGhzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVyTmFtZSA9IGZvbGRlclBhdGhzLmpvaW4oXCIvXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBwb3NzaWJsZUZvbGRlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1wYXRoPVwiJHtmb2xkZXJOYW1lfVwiXWApO1xyXG4gICAgICAgICAgICBpZiAocG9zc2libGVGb2xkZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBmb2xkZXJFbGVtZW50ID0gcG9zc2libGVGb2xkZXJFbGVtZW50LmNsb3Nlc3QoXCIubmF2LWZvbGRlclwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvbGRlclBhdGhzLnBvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZvbGRlckVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Um9vdEZvbGRlckluUGF0aChmaWxlUGF0aDogc3RyaW5nKTogRWxlbWVudCB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGhzID0gZmlsZVBhdGguc3BsaXQoXCIvXCIpO1xyXG4gICAgICAgIGZvbGRlclBhdGhzLnBvcCgpO1xyXG5cclxuICAgICAgICBpZiAoZm9sZGVyUGF0aHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCByb290Rm9sZGVyTmFtZSA9IGZvbGRlclBhdGhzWzBdO1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtcGF0aD1cIiR7cm9vdEZvbGRlck5hbWV9XCJdYCk/LmNsb3Nlc3QoXCIubmF2LWZvbGRlclwiKSB8fCBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU3R5bGVzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zdHlsZUVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVFbC5pZCA9ICdmb2xkZXItaGlnaGxpZ2h0ZXItc3R5bGVzJztcclxuICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlRWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zdHlsZUVsLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgLmhpZ2hsaWdodGVkLWZvbGRlciB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0ZWRGb2xkZXJDb2xvcn0gIWltcG9ydGFudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuaGlnaGxpZ2h0ZWQtZm9sZGVyID4gLm5hdi1mb2xkZXItdGl0bGUge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGlzLnNldHRpbmdzLmhpZ2hsaWdodGVkRm9sZGVyVGl0bGVDb2xvcn0gIWltcG9ydGFudDtcclxuICAgICAgICAgICAgfVxyXG5cdFx0XHQuaGlnaGxpZ2h0ZWQtZm9sZGVyID4gLm5hdi1mb2xkZXItdGl0bGUge1xyXG5cdFx0XHRcdGNvbG9yOiAke3RoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0ZWRGb2xkZXJUZXh0Q29sb3J9ICFpbXBvcnRhbnQ7XHJcblx0XHRcdH1cclxuICAgICAgICAgICAgLmhpZ2hsaWdodGVkLXBhcmVudC1mb2xkZXIge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGlzLnNldHRpbmdzLmhpZ2hsaWdodGVkUGFyZW50Rm9sZGVyQ29sb3J9ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdFx0LmhpZ2hsaWdodGVkLXBhcmVudC1mb2xkZXIgPiAubmF2LWZvbGRlci10aXRsZSB7XHJcblx0XHRcdFx0Y29sb3I6ICR7dGhpcy5zZXR0aW5ncy5oaWdobGlnaHRlZFBhcmVudEZvbGRlclRleHRDb2xvcn0gIWltcG9ydGFudDtcclxuXHRcdFx0fVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgb251bmxvYWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3R5bGVFbCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlRWwucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBGb2xkZXJIaWdobGlnaHRlclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgIHBsdWdpbjogRm9sZGVySGlnaGxpZ2h0ZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRm9sZGVySGlnaGxpZ2h0ZXIpIHtcclxuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdGb2xkZXIgSGlnaGxpZ2h0ZXIgU2V0dGluZ3MnIH0pO1xyXG5cclxuICAgICAgICAvLyBGdW5jdGlvbiB0byBjcmVhdGUgY29sb3Igc2V0dGluZ3Mgd2l0aCB0cmFuc3BhcmVuY3kgc2xpZGVyIGFuZCByZXNldCBidXR0b25cclxuICAgICAgICBjb25zdCBjcmVhdGVDb2xvclNldHRpbmcgPSAobmFtZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIGtleToga2V5b2YgRm9sZGVySGlnaGxpZ2h0ZXJTZXR0aW5ncykgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2F2ZWRDb2xvciA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV07XHJcbiAgICAgICAgICAgIGxldCBhbHBoYVZhbHVlID0gMTsgLy8gRGVmYXVsdCBhbHBoYSB2YWx1ZVxyXG5cclxuICAgICAgICAgICAgLy8gUGFyc2UgaW5pdGlhbCBhbHBoYSB2YWx1ZSBpZiByZ2JhIGlzIHVzZWRcclxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSAoc2F2ZWRDb2xvciBhcyBzdHJpbmcpLm1hdGNoKC9yZ2JhXFwoKFxcZCspLCAoXFxkKyksIChcXGQrKSwgKFtcXGQuXSspXFwpLyk7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgYWxwaGFWYWx1ZSA9IHBhcnNlRmxvYXQobWF0Y2hbNF0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKG5hbWUpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhkZXNjKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignI2VlZWVlZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzYXZlZENvbG9yLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnBsdWdpbi5zZXR0aW5ncyBhcyBhbnkpW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb2xvciBwaWNrZXIgbmV4dCB0byB0aGUgdGV4dCBpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxNTBweCc7IC8vIEFkanVzdCB0aGUgd2lkdGggb2YgdGhlIHRleHQgZmllbGRcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvclBpY2tlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIudHlwZSA9ICdjb2xvcic7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBvbmx5IHRoZSBjb2xvciB3aXRob3V0IGFscGhhIGZvciB0aGUgY29sb3IgcGlja2VyXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmdiQ29sb3IgPSB0aGlzLmV4dHJhY3RSZ2JGcm9tUmdiYShzYXZlZENvbG9yLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnZhbHVlID0gdGhpcy5yZ2JUb0hleChyZ2JDb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIudGl0bGUgPSAnQ2hvb3NlIGEgY29sb3InO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIGhleCBjb2xvciB0byBSR0JcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmdiID0gdGhpcy5oZXhUb1JnYih2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0gPSBgcmdiYSgke3JnYi5yfSwgJHtyZ2IuZ30sICR7cmdiLmJ9LCAke2FscGhhVmFsdWV9KWAgYXMgYW55IGFzIHN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnBhcmVudEVsZW1lbnQ/LmFwcGVuZENoaWxkKGNvbG9yUGlja2VyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSB0cmFuc3BhcmVuY3kgc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNwYXJlbmN5U2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3lTbGlkZXIudHlwZSA9ICdyYW5nZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5U2xpZGVyLm1pbiA9ICcwJztcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3lTbGlkZXIubWF4ID0gJzEnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVNsaWRlci5zdGVwID0gJzAuMDEnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVNsaWRlci52YWx1ZSA9IGFscGhhVmFsdWUudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3lTbGlkZXIuc3R5bGUubWFyZ2luTGVmdCA9ICcxMHB4JztcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3lTbGlkZXIudGl0bGUgPSAnTW92ZSB0aGUgc2xpZGVyIHRvIGFkanVzdCB0cmFuc3BhcmVuY3knO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVNsaWRlci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGFzeW5jIChldmVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhVmFsdWUgPSBwYXJzZUZsb2F0KGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJnYiA9IHRoaXMuaGV4VG9SZ2IoY29sb3JQaWNrZXIudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1trZXldID0gYHJnYmEoJHtyZ2Iucn0sICR7cmdiLmd9LCAke3JnYi5ifSwgJHthbHBoYVZhbHVlfSlgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5nc1trZXldKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwucGFyZW50RWxlbWVudD8uYXBwZW5kQ2hpbGQodHJhbnNwYXJlbmN5U2xpZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSByZXNldCBidXR0b24gbmV4dCB0byB0aGUgdHJhbnNwYXJlbmN5IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc2V0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRCdXR0b24udGV4dENvbnRlbnQgPSAnUmVzZXQnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uLnRpdGxlID0gJ1Jlc2V0IHRvIHByZXZpb3VzIGNvbG9yJztcclxuICAgICAgICAgICAgICAgICAgICByZXNldEJ1dHRvbi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzEwcHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCB0byB0aGUgbGFzdCBzYXZlZCBjb2xvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1trZXldID0gc2F2ZWRDb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNvbG9yIHBpY2tlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZ2JDb2xvciA9IHRoaXMuZXh0cmFjdFJnYkZyb21SZ2JhKHNhdmVkQ29sb3IudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnZhbHVlID0gdGhpcy5yZ2JUb0hleChyZ2JDb2xvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRyYW5zcGFyZW5jeSBzbGlkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxwaGEgPSB0aGlzLmV4dHJhY3RBbHBoYUZyb21SZ2JhKHNhdmVkQ29sb3IudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVNsaWRlci52YWx1ZSA9IGFscGhhLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRleHQgaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZShzYXZlZENvbG9yLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5wYXJlbnRFbGVtZW50Py5hcHBlbmRDaGlsZChyZXNldEJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBIaWdobGlnaHRlZCBGb2xkZXIgQ29sb3JcclxuICAgICAgICBjcmVhdGVDb2xvclNldHRpbmcoJ0hpZ2hsaWdodGVkIEZvbGRlciBDb2xvcicsICdDaG9vc2UgYSBiYWNrZ3JvdW5kLWNvbG9yIG9mIHRoZSBhY3RpdmUgZm9sZGVyLWNvbnRhaW5lci4nLCAnaGlnaGxpZ2h0ZWRGb2xkZXJDb2xvcicpO1xyXG5cclxuICAgICAgICAvLyBIaWdobGlnaHRlZCBGb2xkZXIgVGl0bGUgQ29sb3JcclxuICAgICAgICBjcmVhdGVDb2xvclNldHRpbmcoJ0hpZ2hsaWdodGVkIEZvbGRlciBUaXRsZSBDb2xvcicsICdDaG9vc2UgYSBiYWNrZ3JvdW5kLWNvbG9yIGZvciB0aGUgY2xvc2VzdCBmb2xkZXIuJywgJ2hpZ2hsaWdodGVkRm9sZGVyVGl0bGVDb2xvcicpO1xyXG5cclxuXHRcdC8vIEhpZ2hsaWdodGVkIEZvbGRlciBUZXh0IENvbG9yXHJcblx0XHRjcmVhdGVDb2xvclNldHRpbmcoJ0hpZ2hsaWdodGVkIEZvbGRlciBUZXh0IENvbG9yJywgJ0Nob29zZSBhIGNvbG9yIGZvciB0aGUgaGlnaGxpZ2h0ZWQgZm9sZGVyIHRleHQuJywgJ2hpZ2hsaWdodGVkRm9sZGVyVGV4dENvbG9yJyk7XHJcblxyXG4gICAgICAgIC8vIE5ldyBzZXR0aW5nIGZvciBoaWdobGlnaHRpbmcgcGFyZW50IGZvbGRlclxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnSGlnaGxpZ2h0IFBhcmVudCBGb2xkZXInKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnRW5hYmxlIGhpZ2hsaWdodGluZyBvZiB0aGUgcm9vdCBmb2xkZXIgc2VnbWVudCBpbiB0aGUgcGF0aCB0byB0aGUgYWN0aXZlIG5vdGUuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0UGFyZW50Rm9sZGVyKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFBhcmVudEZvbGRlciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBQYXJlbnQgRm9sZGVyIENvbG9yXHJcblx0XHQvLyBQYXJlbnQgRm9sZGVyIENvbG9yXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0UGFyZW50Rm9sZGVyKSB7XHJcblx0XHRcdGNyZWF0ZUNvbG9yU2V0dGluZygnUGFyZW50IEZvbGRlciBDb2xvcicsICdDaG9vc2UgYSBiYWNrZ3JvdW5kLWNvbG9yIG9mIHRoZSByb290IGZvbGRlciBzZWdtZW50LicsICdoaWdobGlnaHRlZFBhcmVudEZvbGRlckNvbG9yJyk7XHJcblx0XHRcdGNyZWF0ZUNvbG9yU2V0dGluZygnUGFyZW50IEZvbGRlciBUZXh0IENvbG9yJywgJ0Nob29zZSBhIGNvbG9yIGZvciB0aGUgaGlnaGxpZ2h0ZWQgcGFyZW50IGZvbGRlciB0ZXh0LicsICdoaWdobGlnaHRlZFBhcmVudEZvbGRlclRleHRDb2xvcicpO1xyXG5cdFx0fVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGhleCBjb2xvciB0byBSR0JcclxuICAgIGhleFRvUmdiKGhleDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgYmlnaW50ID0gcGFyc2VJbnQoaGV4LnNsaWNlKDEpLCAxNik7XHJcbiAgICAgICAgY29uc3QgciA9IChiaWdpbnQgPj4gMTYpICYgMjU1O1xyXG4gICAgICAgIGNvbnN0IGcgPSAoYmlnaW50ID4+IDgpICYgMjU1O1xyXG4gICAgICAgIGNvbnN0IGIgPSBiaWdpbnQgJiAyNTU7XHJcbiAgICAgICAgcmV0dXJuIHsgciwgZywgYiB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBleHRyYWN0IFJHQiB2YWx1ZXMgZnJvbSBSR0JBIHN0cmluZ1xyXG4gICAgZXh0cmFjdFJnYkZyb21SZ2JhKHJnYmE6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcmdiYS5tYXRjaCgvcmdiYT9cXCgoXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspLyk7XHJcbiAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByOiBwYXJzZUludChtYXRjaFsxXSksXHJcbiAgICAgICAgICAgICAgICBnOiBwYXJzZUludChtYXRjaFsyXSksXHJcbiAgICAgICAgICAgICAgICBiOiBwYXJzZUludChtYXRjaFszXSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgcjogMCwgZzogMCwgYjogMCB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBleHRyYWN0IGFscGhhIHZhbHVlIGZyb20gUkdCQSBzdHJpbmdcclxuICAgIGV4dHJhY3RBbHBoYUZyb21SZ2JhKHJnYmE6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcmdiYS5tYXRjaCgvcmdiYT9cXCguKj8sXFxzKihbXFxkLl0rKVxcKS8pO1xyXG4gICAgICAgIHJldHVybiBtYXRjaCA/IHBhcnNlRmxvYXQobWF0Y2hbMV0pIDogMTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBSR0IgdG8gSEVYXHJcbiAgICByZ2JUb0hleChyZ2I6IHsgcjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciB9KSB7XHJcbiAgICAgICAgcmV0dXJuIFwiI1wiICsgKCgxIDw8IDI0KSArIChyZ2IuciA8PCAxNikgKyAocmdiLmcgPDwgOCkgKyByZ2IuYikudG9TdHJpbmcoMTYpLnNsaWNlKDEpO1xyXG4gICAgfVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUF1RDtBQVd2RCxJQUFNLG1CQUE4QztBQUFBLEVBQ2hELHdCQUF3QjtBQUFBLEVBQ3hCLDZCQUE2QjtBQUFBLEVBQ2hDLDRCQUE0QjtBQUFBLEVBQ3pCLHVCQUF1QjtBQUFBLEVBQ3ZCLDhCQUE4QjtBQUFBLEVBQ2pDLGtDQUFrQztBQUNuQztBQUVBLElBQXFCLG9CQUFyQixjQUErQyx1QkFBTztBQUFBLEVBQXREO0FBQUE7QUFFSSxTQUFRLFVBQW1DO0FBQUE7QUFBQSxFQUUzQyxNQUFNLFNBQVM7QUFDWCxVQUFNLEtBQUssYUFBYTtBQUV4QixTQUFLLGNBQWMsSUFBSSw0QkFBNEIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUdsRSxTQUFLLGFBQWE7QUFHbEIsU0FBSztBQUFBLE1BQ0QsS0FBSyxJQUFJLFVBQVUsR0FBRyxzQkFBc0IsTUFBTTtBQUM5QyxhQUFLLGlCQUFpQjtBQUFBLE1BQzFCLENBQUM7QUFBQSxJQUNMO0FBR0EsU0FBSyxJQUFJLFVBQVUsY0FBYyxNQUFNO0FBQ25DLFdBQUssaUJBQWlCO0FBQ3RCLFdBQUssYUFBYTtBQUdsQixpQkFBVyxNQUFNO0FBQ2IsYUFBSyxhQUFhO0FBQ2xCLGFBQUssaUJBQWlCO0FBQUEsTUFDMUIsR0FBRyxHQUFHO0FBQUEsSUFDVixDQUFDO0FBQUEsRUFDTDtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDN0U7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixVQUFNLEtBQUssU0FB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

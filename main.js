/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FolderHighlighter
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  highlightedFolderColor: "#eeeeee",
  highlightFolderTitleColor: false,
  highlightedFolderTitleColor: "#ffffff00",
  highlightedFolderTextColor: "#000000",
  highlightParentFolder: false,
  highlightedParentFolderColor: "#dddddd",
  highlightedParentFolderTextColor: "#000000",
  highlightedFolderBorderRadius: "5px",
  highlightedParentFolderBorderRadius: "5px"
};
var FolderHighlighter = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.styleEl = null;
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new FolderHighlighterSettingTab(this.app, this));
    this.updateStyles();
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        this.highlightFolders();
      })
    );
    this.app.workspace.onLayoutReady(() => {
      this.highlightFolders();
      this.updateStyles();
      setTimeout(() => {
        this.updateStyles();
        this.highlightFolders();
      }, 500);
    });
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.updateStyles();
  }
  highlightFolders() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile)
      return;
    const allFolders = document.querySelectorAll(".nav-folder");
    allFolders.forEach((folder) => {
      folder.classList.remove("highlighted-folder", "highlighted-parent-folder");
    });
    const currentFolder = this.getParentFolderElement(activeFile.path);
    if (currentFolder) {
      currentFolder.classList.add("highlighted-folder");
      if (this.settings.highlightParentFolder) {
        const rootFolder = this.getRootFolderInPath(activeFile.path);
        if (rootFolder && rootFolder !== currentFolder) {
          rootFolder.classList.add("highlighted-parent-folder");
        }
      }
    }
  }
  getParentFolderElement(filePath) {
    const folderPaths = filePath.split("/");
    folderPaths.pop();
    let folderElement = null;
    while (folderPaths.length > 0) {
      const folderName = folderPaths.join("/");
      const possibleFolderElement = document.querySelector(`[data-path="${folderName}"]`);
      if (possibleFolderElement) {
        folderElement = possibleFolderElement.closest(".nav-folder");
        break;
      }
      folderPaths.pop();
    }
    return folderElement;
  }
  getRootFolderInPath(filePath) {
    var _a;
    const folderPaths = filePath.split("/");
    folderPaths.pop();
    if (folderPaths.length > 0) {
      const rootFolderName = folderPaths[0];
      return ((_a = document.querySelector(`[data-path="${rootFolderName}"]`)) == null ? void 0 : _a.closest(".nav-folder")) || null;
    }
    return null;
  }
  updateStyles() {
    if (!this.styleEl) {
      this.styleEl = document.createElement("style");
      this.styleEl.id = "folder-highlighter-styles";
      document.head.appendChild(this.styleEl);
    }
    const styleContent = `
            .highlighted-folder {
                background-color: ${this.settings.highlightedFolderColor} !important;
                border-radius: ${this.settings.highlightedFolderBorderRadius} !important;
            }
            .highlighted-folder > .nav-folder-title {
                ${this.settings.highlightFolderTitleColor ? `background-color: ${this.settings.highlightedFolderTitleColor} !important;` : ""}
                color: ${this.settings.highlightedFolderTextColor} !important;
            }
            .highlighted-parent-folder {
                background-color: ${this.settings.highlightedParentFolderColor} !important;
                border-radius: ${this.settings.highlightedParentFolderBorderRadius} !important;
            }
            .highlighted-parent-folder > .nav-folder-title {
                color: ${this.settings.highlightedParentFolderTextColor} !important;
            }
        `;
    this.styleEl.textContent = styleContent;
  }
  onunload() {
    if (this.styleEl) {
      this.styleEl.remove();
    }
  }
};
var FolderHighlighterSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Folder Highlighter Settings" });
    const createColorSetting = (name, desc, key) => {
      let savedColor = this.plugin.settings[key];
      let alphaValue = 1;
      const match = savedColor.match(/rgba\((\d+), (\d+), (\d+), ([\d.]+)\)/);
      if (match) {
        alphaValue = parseFloat(match[4]);
      }
      new import_obsidian.Setting(containerEl).setName(name).setDesc(desc).addText((text) => {
        var _a, _b, _c;
        text.setPlaceholder("#eeeeee").setValue(savedColor.toString()).onChange(async (value) => {
          this.plugin.settings[key] = value;
          await this.plugin.saveSettings();
        });
        text.inputEl.style.width = "150px";
        const colorPicker = document.createElement("input");
        colorPicker.type = "color";
        const rgbColor = this.extractRgbFromRgba(savedColor.toString());
        colorPicker.value = this.rgbToHex(rgbColor);
        colorPicker.title = "Choose a color";
        colorPicker.addEventListener("input", async (event) => {
          const value = event.target.value;
          const rgb = this.hexToRgb(value);
          this.plugin.settings[key] = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${alphaValue})`;
          await this.plugin.saveSettings();
          text.setValue(this.plugin.settings[key]);
        });
        (_a = text.inputEl.parentElement) == null ? void 0 : _a.appendChild(colorPicker);
        const transparencySlider = document.createElement("input");
        transparencySlider.type = "range";
        transparencySlider.min = "0";
        transparencySlider.max = "1";
        transparencySlider.step = "0.01";
        transparencySlider.value = alphaValue.toString();
        transparencySlider.style.marginLeft = "10px";
        transparencySlider.title = "Move the slider to adjust transparency";
        transparencySlider.addEventListener("input", async (event) => {
          alphaValue = parseFloat(event.target.value);
          const rgb = this.hexToRgb(colorPicker.value);
          this.plugin.settings[key] = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${alphaValue})`;
          await this.plugin.saveSettings();
          text.setValue(this.plugin.settings[key]);
        });
        (_b = text.inputEl.parentElement) == null ? void 0 : _b.appendChild(transparencySlider);
        const resetButton = document.createElement("button");
        resetButton.textContent = "Reset";
        resetButton.title = "Reset to previous color";
        resetButton.style.marginLeft = "10px";
        resetButton.addEventListener("click", async () => {
          this.plugin.settings[key] = savedColor;
          await this.plugin.saveSettings();
          const rgbColor2 = this.extractRgbFromRgba(savedColor.toString());
          colorPicker.value = this.rgbToHex(rgbColor2);
          const alpha = this.extractAlphaFromRgba(savedColor.toString());
          transparencySlider.value = alpha.toString();
          text.setValue(savedColor.toString());
        });
        (_c = text.inputEl.parentElement) == null ? void 0 : _c.appendChild(resetButton);
      });
    };
    createColorSetting("Folder Section Background-Color", "Choose a background-color of the active folder-container.", "highlightedFolderColor");
    new import_obsidian.Setting(containerEl).setName("Folder Background Color").setDesc("Enable background-color of the folder title.").addToggle((toggle) => toggle.setValue(this.plugin.settings.highlightFolderTitleColor).onChange(async (value) => {
      this.plugin.settings.highlightFolderTitleColor = value;
      if (!value) {
        this.plugin.settings.highlightedFolderTitleColor = "#ffffff00";
      }
      await this.plugin.saveSettings();
      this.display();
      this.plugin.updateStyles();
    }));
    if (this.plugin.settings.highlightFolderTitleColor) {
      createColorSetting("Folder Background-Color", "Choose a color for the highlighted folder title.", "highlightedFolderTitleColor");
    }
    createColorSetting("Folder Text Color", "Choose a color for the highlighted folder text.", "highlightedFolderTextColor");
    new import_obsidian.Setting(containerEl).setName("Folder Border Radius").setDesc("Set the border radius of the highlighted folder.").addSlider((slider) => slider.setLimits(0, 50, 1).setValue(parseInt(this.plugin.settings.highlightedFolderBorderRadius)).onChange(async (value) => {
      const radiusWithPx = `${value}px`;
      this.plugin.settings.highlightedFolderBorderRadius = radiusWithPx;
      await this.plugin.saveSettings();
      this.plugin.updateStyles();
    }).setDynamicTooltip());
    new import_obsidian.Setting(containerEl).setName("Highlight Root Folder").setDesc("Enable background-color of the root folder segment in the path to the active note.").addToggle((toggle) => toggle.setValue(this.plugin.settings.highlightParentFolder).onChange(async (value) => {
      this.plugin.settings.highlightParentFolder = value;
      await this.plugin.saveSettings();
      this.display();
    }));
    if (this.plugin.settings.highlightParentFolder) {
      createColorSetting("Root Folder Section Background-Color", "Choose a background-color of the root folder segment.", "highlightedParentFolderColor");
      createColorSetting("Root Folder Text Color", "Choose a color for the highlighted root folder text.", "highlightedParentFolderTextColor");
    }
    new import_obsidian.Setting(containerEl).setName("Root Folder Border Radius").setDesc("Set the border radius of the highlighted root folder.").addSlider((slider) => slider.setLimits(0, 50, 1).setValue(parseInt(this.plugin.settings.highlightedParentFolderBorderRadius)).onChange(async (value) => {
      const radiusWithPx = `${value}px`;
      this.plugin.settings.highlightedParentFolderBorderRadius = radiusWithPx;
      await this.plugin.saveSettings();
      this.plugin.updateStyles();
    }).setDynamicTooltip());
  }
  // Helper function to convert hex color to RGB
  hexToRgb(hex) {
    const bigint = parseInt(hex.slice(1), 16);
    const r = bigint >> 16 & 255;
    const g = bigint >> 8 & 255;
    const b = bigint & 255;
    return { r, g, b };
  }
  // Helper function to extract RGB values from RGBA string
  extractRgbFromRgba(rgba) {
    const match = rgba.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);
    if (match) {
      return {
        r: parseInt(match[1]),
        g: parseInt(match[2]),
        b: parseInt(match[3])
      };
    }
    return { r: 0, g: 0, b: 0 };
  }
  // Helper function to extract alpha value from RGBA string
  extractAlphaFromRgba(rgba) {
    const match = rgba.match(/rgba?\(.*?,\s*([\d.]+)\)/);
    return match ? parseFloat(match[1]) : 1;
  }
  // Helper function to convert RGB to HEX
  rgbToHex(rgb) {
    return "#" + ((1 << 24) + (rgb.r << 16) + (rgb.g << 8) + rgb.b).toString(16).slice(1);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbnRlcmZhY2UgRm9sZGVySGlnaGxpZ2h0ZXJTZXR0aW5ncyB7XHJcbiAgICBoaWdobGlnaHRlZEZvbGRlckNvbG9yOiBzdHJpbmc7XHJcbiAgICBoaWdobGlnaHRGb2xkZXJUaXRsZUNvbG9yOiBib29sZWFuO1xyXG4gICAgaGlnaGxpZ2h0ZWRGb2xkZXJUaXRsZUNvbG9yOiBzdHJpbmc7XHJcbiAgICBoaWdobGlnaHRlZEZvbGRlclRleHRDb2xvcjogc3RyaW5nO1xyXG4gICAgaGlnaGxpZ2h0UGFyZW50Rm9sZGVyOiBib29sZWFuO1xyXG4gICAgaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJDb2xvcjogc3RyaW5nO1xyXG4gICAgaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJUZXh0Q29sb3I6IHN0cmluZztcclxuICAgIGhpZ2hsaWdodGVkRm9sZGVyQm9yZGVyUmFkaXVzOiBzdHJpbmc7XHJcbiAgICBoaWdobGlnaHRlZFBhcmVudEZvbGRlckJvcmRlclJhZGl1czogc3RyaW5nO1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBGb2xkZXJIaWdobGlnaHRlclNldHRpbmdzID0ge1xyXG4gICAgaGlnaGxpZ2h0ZWRGb2xkZXJDb2xvcjogJyNlZWVlZWUnLFxyXG4gICAgaGlnaGxpZ2h0Rm9sZGVyVGl0bGVDb2xvcjogZmFsc2UsXHJcbiAgICBoaWdobGlnaHRlZEZvbGRlclRpdGxlQ29sb3I6ICcjZmZmZmZmMDAnLFxyXG5cdGhpZ2hsaWdodGVkRm9sZGVyVGV4dENvbG9yOiAnIzAwMDAwMCcsXHJcbiAgICBoaWdobGlnaHRQYXJlbnRGb2xkZXI6IGZhbHNlLFxyXG4gICAgaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJDb2xvcjogJyNkZGRkZGQnLFxyXG5cdGhpZ2hsaWdodGVkUGFyZW50Rm9sZGVyVGV4dENvbG9yOiAnIzAwMDAwMCcsXHJcbiAgICBoaWdobGlnaHRlZEZvbGRlckJvcmRlclJhZGl1czogJzVweCcsXHJcbiAgICBoaWdobGlnaHRlZFBhcmVudEZvbGRlckJvcmRlclJhZGl1czogJzVweCcsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb2xkZXJIaWdobGlnaHRlciBleHRlbmRzIFBsdWdpbiB7XHJcbiAgICBzZXR0aW5nczogRm9sZGVySGlnaGxpZ2h0ZXJTZXR0aW5ncztcclxuICAgIHByaXZhdGUgc3R5bGVFbDogSFRNTFN0eWxlRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEZvbGRlckhpZ2hsaWdodGVyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuICAgICAgICAvLyBBcHBseSBzdHlsZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgbG9hZGluZ1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XHJcblxyXG4gICAgICAgIC8vIFJlZ2lzdGVyIGV2ZW50IHRvIHVwZGF0ZSB0aGUgaGlnaGxpZ2h0ZWQgZm9sZGVyIHdoZW4gdGhlIGFjdGl2ZSBub3RlIGNoYW5nZXNcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImFjdGl2ZS1sZWFmLWNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEZvbGRlcnMoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBIaWdobGlnaHQgdGhlIHBhcmVudCBmb2xkZXIgYW5kIGFwcGx5IHN0eWxlcyB3aGVuIHRoZSBsYXlvdXQgaXMgcmVhZHlcclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0Rm9sZGVycygpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGEgc2hvcnQgdGltZW91dCB0byBlbnN1cmUgc3R5bGVzIGFyZSBhcHBsaWVkIGFmdGVyIGV2ZXJ5dGhpbmcgaXMgbG9hZGVkXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdHlsZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0Rm9sZGVycygpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZ2hsaWdodEZvbGRlcnMoKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBhbGwgcHJldmlvdXMgaGlnaGxpZ2h0c1xyXG4gICAgICAgIGNvbnN0IGFsbEZvbGRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdi1mb2xkZXJcIik7XHJcbiAgICAgICAgYWxsRm9sZGVycy5mb3JFYWNoKChmb2xkZXIpID0+IHtcclxuICAgICAgICAgICAgZm9sZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdobGlnaHRlZC1mb2xkZXJcIiwgXCJoaWdobGlnaHRlZC1wYXJlbnQtZm9sZGVyXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBIaWdobGlnaHQgdGhlIGZvbGRlciBjb250YWluaW5nIHRoZSBhY3RpdmUgbm90ZVxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRGb2xkZXIgPSB0aGlzLmdldFBhcmVudEZvbGRlckVsZW1lbnQoYWN0aXZlRmlsZS5wYXRoKTtcclxuICAgICAgICBpZiAoY3VycmVudEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGb2xkZXIuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodGVkLWZvbGRlclwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmhpZ2hsaWdodFBhcmVudEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gSGlnaGxpZ2h0IHRoZSByb290IGZvbGRlciBpbiB0aGUgcGF0aCB0byB0aGUgYWN0aXZlIG5vdGVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RGb2xkZXIgPSB0aGlzLmdldFJvb3RGb2xkZXJJblBhdGgoYWN0aXZlRmlsZS5wYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmIChyb290Rm9sZGVyICYmIHJvb3RGb2xkZXIgIT09IGN1cnJlbnRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByb290Rm9sZGVyLmNsYXNzTGlzdC5hZGQoXCJoaWdobGlnaHRlZC1wYXJlbnQtZm9sZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFBhcmVudEZvbGRlckVsZW1lbnQoZmlsZVBhdGg6IHN0cmluZyk6IEVsZW1lbnQgfCBudWxsIHtcclxuICAgICAgICBjb25zdCBmb2xkZXJQYXRocyA9IGZpbGVQYXRoLnNwbGl0KFwiL1wiKTtcclxuICAgICAgICBmb2xkZXJQYXRocy5wb3AoKTtcclxuICAgICAgICBsZXQgZm9sZGVyRWxlbWVudDogRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgICAgICB3aGlsZSAoZm9sZGVyUGF0aHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXJOYW1lID0gZm9sZGVyUGF0aHMuam9pbihcIi9cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc3NpYmxlRm9sZGVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXBhdGg9XCIke2ZvbGRlck5hbWV9XCJdYCk7XHJcbiAgICAgICAgICAgIGlmIChwb3NzaWJsZUZvbGRlckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGZvbGRlckVsZW1lbnQgPSBwb3NzaWJsZUZvbGRlckVsZW1lbnQuY2xvc2VzdChcIi5uYXYtZm9sZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9sZGVyUGF0aHMucG9wKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZm9sZGVyRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSb290Rm9sZGVySW5QYXRoKGZpbGVQYXRoOiBzdHJpbmcpOiBFbGVtZW50IHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aHMgPSBmaWxlUGF0aC5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgZm9sZGVyUGF0aHMucG9wKCk7XHJcblxyXG4gICAgICAgIGlmIChmb2xkZXJQYXRocy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvb3RGb2xkZXJOYW1lID0gZm9sZGVyUGF0aHNbMF07XHJcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1wYXRoPVwiJHtyb290Rm9sZGVyTmFtZX1cIl1gKT8uY2xvc2VzdChcIi5uYXYtZm9sZGVyXCIpIHx8IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTdHlsZXMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0eWxlRWwpIHtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZUVsLmlkID0gJ2ZvbGRlci1oaWdobGlnaHRlci1zdHlsZXMnO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMuc3R5bGVFbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzdHlsZUNvbnRlbnQgPSBgXHJcbiAgICAgICAgICAgIC5oaWdobGlnaHRlZC1mb2xkZXIge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGlzLnNldHRpbmdzLmhpZ2hsaWdodGVkRm9sZGVyQ29sb3J9ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAke3RoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0ZWRGb2xkZXJCb3JkZXJSYWRpdXN9ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLmhpZ2hsaWdodGVkLWZvbGRlciA+IC5uYXYtZm9sZGVyLXRpdGxlIHtcclxuICAgICAgICAgICAgICAgICR7dGhpcy5zZXR0aW5ncy5oaWdobGlnaHRGb2xkZXJUaXRsZUNvbG9yID8gYGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5zZXR0aW5ncy5oaWdobGlnaHRlZEZvbGRlclRpdGxlQ29sb3J9ICFpbXBvcnRhbnQ7YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICR7dGhpcy5zZXR0aW5ncy5oaWdobGlnaHRlZEZvbGRlclRleHRDb2xvcn0gIWltcG9ydGFudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuaGlnaGxpZ2h0ZWQtcGFyZW50LWZvbGRlciB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJDb2xvcn0gIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6ICR7dGhpcy5zZXR0aW5ncy5oaWdobGlnaHRlZFBhcmVudEZvbGRlckJvcmRlclJhZGl1c30gIWltcG9ydGFudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuaGlnaGxpZ2h0ZWQtcGFyZW50LWZvbGRlciA+IC5uYXYtZm9sZGVyLXRpdGxlIHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAke3RoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJUZXh0Q29sb3J9ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgICAgIHRoaXMuc3R5bGVFbC50ZXh0Q29udGVudCA9IHN0eWxlQ29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBvbnVubG9hZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5zdHlsZUVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVFbC5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEZvbGRlckhpZ2hsaWdodGVyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG4gICAgcGx1Z2luOiBGb2xkZXJIaWdobGlnaHRlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBGb2xkZXJIaWdobGlnaHRlcikge1xyXG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ZvbGRlciBIaWdobGlnaHRlciBTZXR0aW5ncycgfSk7XHJcblxyXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSBjb2xvciBzZXR0aW5ncyB3aXRoIHRyYW5zcGFyZW5jeSBzbGlkZXIgYW5kIHJlc2V0IGJ1dHRvblxyXG4gICAgICAgIGNvbnN0IGNyZWF0ZUNvbG9yU2V0dGluZyA9IChuYW1lOiBzdHJpbmcsIGRlc2M6IHN0cmluZywga2V5OiBrZXlvZiBGb2xkZXJIaWdobGlnaHRlclNldHRpbmdzKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzYXZlZENvbG9yID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XTtcclxuICAgICAgICAgICAgbGV0IGFscGhhVmFsdWUgPSAxOyAvLyBEZWZhdWx0IGFscGhhIHZhbHVlXHJcblxyXG4gICAgICAgICAgICAvLyBQYXJzZSBpbml0aWFsIGFscGhhIHZhbHVlIGlmIHJnYmEgaXMgdXNlZFxyXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IChzYXZlZENvbG9yIGFzIHN0cmluZykubWF0Y2goL3JnYmFcXCgoXFxkKyksIChcXGQrKSwgKFxcZCspLCAoW1xcZC5dKylcXCkvKTtcclxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICBhbHBoYVZhbHVlID0gcGFyc2VGbG9hdChtYXRjaFs0XSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUobmFtZSlcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKGRlc2MpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCcjZWVlZWVlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHNhdmVkQ29sb3IudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucGx1Z2luLnNldHRpbmdzIGFzIGFueSlba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGNvbG9yIHBpY2tlciBuZXh0IHRvIHRoZSB0ZXh0IGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzE1MHB4JzsgLy8gQWRqdXN0IHRoZSB3aWR0aCBvZiB0aGUgdGV4dCBmaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yUGlja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci50eXBlID0gJ2NvbG9yJztcclxuICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IG9ubHkgdGhlIGNvbG9yIHdpdGhvdXQgYWxwaGEgZm9yIHRoZSBjb2xvciBwaWNrZXJcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZ2JDb2xvciA9IHRoaXMuZXh0cmFjdFJnYkZyb21SZ2JhKHNhdmVkQ29sb3IudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIudmFsdWUgPSB0aGlzLnJnYlRvSGV4KHJnYkNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci50aXRsZSA9ICdDaG9vc2UgYSBjb2xvcic7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBhc3luYyAoZXZlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgaGV4IGNvbG9yIHRvIFJHQlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZ2IgPSB0aGlzLmhleFRvUmdiKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucGx1Z2luLnNldHRpbmdzIGFzIGFueSlba2V5XSA9IGByZ2JhKCR7cmdiLnJ9LCAke3JnYi5nfSwgJHtyZ2IuYn0sICR7YWxwaGFWYWx1ZX0pYCBhcyBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKCh0aGlzLnBsdWdpbi5zZXR0aW5ncyBhcyBhbnkpW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5wYXJlbnRFbGVtZW50Py5hcHBlbmRDaGlsZChjb2xvclBpY2tlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgdHJhbnNwYXJlbmN5IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW5jeVNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5U2xpZGVyLnR5cGUgPSAncmFuZ2UnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVNsaWRlci5taW4gPSAnMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5U2xpZGVyLm1heCA9ICcxJztcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3lTbGlkZXIuc3RlcCA9ICcwLjAxJztcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3lTbGlkZXIudmFsdWUgPSBhbHBoYVZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5U2xpZGVyLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTBweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5U2xpZGVyLnRpdGxlID0gJ01vdmUgdGhlIHNsaWRlciB0byBhZGp1c3QgdHJhbnNwYXJlbmN5JztcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3lTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBhc3luYyAoZXZlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYVZhbHVlID0gcGFyc2VGbG9hdChldmVudC50YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZ2IgPSB0aGlzLmhleFRvUmdiKGNvbG9yUGlja2VyLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucGx1Z2luLnNldHRpbmdzIGFzIGFueSlba2V5XSA9IGByZ2JhKCR7cmdiLnJ9LCAke3JnYi5nfSwgJHtyZ2IuYn0sICR7YWxwaGFWYWx1ZX0pYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUoKHRoaXMucGx1Z2luLnNldHRpbmdzIGFzIGFueSlba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnBhcmVudEVsZW1lbnQ/LmFwcGVuZENoaWxkKHRyYW5zcGFyZW5jeVNsaWRlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgcmVzZXQgYnV0dG9uIG5leHQgdG8gdGhlIHRyYW5zcGFyZW5jeSBzbGlkZXJcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNldEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uLnRleHRDb250ZW50ID0gJ1Jlc2V0JztcclxuICAgICAgICAgICAgICAgICAgICByZXNldEJ1dHRvbi50aXRsZSA9ICdSZXNldCB0byBwcmV2aW91cyBjb2xvcic7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRCdXR0b24uc3R5bGUubWFyZ2luTGVmdCA9ICcxMHB4JztcclxuICAgICAgICAgICAgICAgICAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgdG8gdGhlIGxhc3Qgc2F2ZWQgY29sb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucGx1Z2luLnNldHRpbmdzIGFzIGFueSlba2V5XSA9IHNhdmVkQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBjb2xvciBwaWNrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmdiQ29sb3IgPSB0aGlzLmV4dHJhY3RSZ2JGcm9tUmdiYShzYXZlZENvbG9yLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci52YWx1ZSA9IHRoaXMucmdiVG9IZXgocmdiQ29sb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0cmFuc3BhcmVuY3kgc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFscGhhID0gdGhpcy5leHRyYWN0QWxwaGFGcm9tUmdiYShzYXZlZENvbG9yLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3lTbGlkZXIudmFsdWUgPSBhbHBoYS50b1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0ZXh0IGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUoc2F2ZWRDb2xvci50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwucGFyZW50RWxlbWVudD8uYXBwZW5kQ2hpbGQocmVzZXRCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gSGlnaGxpZ2h0ZWQgRm9sZGVyIENvbG9yXHJcbiAgICAgICAgY3JlYXRlQ29sb3JTZXR0aW5nKCdGb2xkZXIgU2VjdGlvbiBCYWNrZ3JvdW5kLUNvbG9yJywgJ0Nob29zZSBhIGJhY2tncm91bmQtY29sb3Igb2YgdGhlIGFjdGl2ZSBmb2xkZXItY29udGFpbmVyLicsICdoaWdobGlnaHRlZEZvbGRlckNvbG9yJyk7XHJcblxyXG4gICAgICAgIC8vIE5ldyBzZXR0aW5nIGZvciBoaWdobGlnaHRpbmcgcGFyZW50IGZvbGRlclxyXG4gICAgICAgIC8vIEhpZ2hsaWdodCBGb2xkZXIgVGl0bGUgQ29sb3JcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0ZvbGRlciBCYWNrZ3JvdW5kIENvbG9yJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0VuYWJsZSBiYWNrZ3JvdW5kLWNvbG9yIG9mIHRoZSBmb2xkZXIgdGl0bGUuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Rm9sZGVyVGl0bGVDb2xvcilcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRGb2xkZXJUaXRsZUNvbG9yID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRlZEZvbGRlclRpdGxlQ29sb3IgPSAnI2ZmZmZmZjAwJzsgLy8gUmVzZXQgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVTdHlsZXMoKTsgLy8gVXBkYXRlIHN0eWxlcyBpbW1lZGlhdGVseVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBIaWdobGlnaHRlZCBGb2xkZXIgVGl0bGUgQ29sb3JcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Rm9sZGVyVGl0bGVDb2xvcikge1xyXG4gICAgICAgICAgICBjcmVhdGVDb2xvclNldHRpbmcoJ0ZvbGRlciBCYWNrZ3JvdW5kLUNvbG9yJywgJ0Nob29zZSBhIGNvbG9yIGZvciB0aGUgaGlnaGxpZ2h0ZWQgZm9sZGVyIHRpdGxlLicsICdoaWdobGlnaHRlZEZvbGRlclRpdGxlQ29sb3InKTtcclxuICAgICAgICB9XHJcblxyXG5cdFx0Ly8gSGlnaGxpZ2h0ZWQgRm9sZGVyIFRleHQgQ29sb3JcclxuXHRcdGNyZWF0ZUNvbG9yU2V0dGluZygnRm9sZGVyIFRleHQgQ29sb3InLCAnQ2hvb3NlIGEgY29sb3IgZm9yIHRoZSBoaWdobGlnaHRlZCBmb2xkZXIgdGV4dC4nLCAnaGlnaGxpZ2h0ZWRGb2xkZXJUZXh0Q29sb3InKTtcclxuXHJcbiAgICAgICAgLy8gSGlnaGxpZ2h0ZWQgRm9sZGVyIEJvcmRlciBSYWRpdXNcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0ZvbGRlciBCb3JkZXIgUmFkaXVzJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgYm9yZGVyIHJhZGl1cyBvZiB0aGUgaGlnaGxpZ2h0ZWQgZm9sZGVyLicpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLCA1MCwgMSkgIC8vIE1pbiwgTWF4LCBTdGVwXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGFyc2VJbnQodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0ZWRGb2xkZXJCb3JkZXJSYWRpdXMpKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhZGl1c1dpdGhQeCA9IGAke3ZhbHVlfXB4YDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRlZEZvbGRlckJvcmRlclJhZGl1cyA9IHJhZGl1c1dpdGhQeDtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVTdHlsZXMoKTsgLy8gVXBkYXRlIHN0eWxlcyBpbW1lZGlhdGVseVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpKTsgIC8vIEFkZHMgYSB0b29sdGlwIHNob3dpbmcgdGhlIGN1cnJlbnQgdmFsdWVcclxuXHJcbiAgICAgICAgLy8gTmV3IHNldHRpbmcgZm9yIGhpZ2hsaWdodGluZyBwYXJlbnQgZm9sZGVyXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdIaWdobGlnaHQgUm9vdCBGb2xkZXInKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnRW5hYmxlIGJhY2tncm91bmQtY29sb3Igb2YgdGhlIHJvb3QgZm9sZGVyIHNlZ21lbnQgaW4gdGhlIHBhdGggdG8gdGhlIGFjdGl2ZSBub3RlLicpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFBhcmVudEZvbGRlcilcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRQYXJlbnRGb2xkZXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcblx0XHQvLyBQYXJlbnQgRm9sZGVyIENvbG9yXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0UGFyZW50Rm9sZGVyKSB7XHJcblx0XHRcdGNyZWF0ZUNvbG9yU2V0dGluZygnUm9vdCBGb2xkZXIgU2VjdGlvbiBCYWNrZ3JvdW5kLUNvbG9yJywgJ0Nob29zZSBhIGJhY2tncm91bmQtY29sb3Igb2YgdGhlIHJvb3QgZm9sZGVyIHNlZ21lbnQuJywgJ2hpZ2hsaWdodGVkUGFyZW50Rm9sZGVyQ29sb3InKTtcclxuXHRcdFx0Y3JlYXRlQ29sb3JTZXR0aW5nKCdSb290IEZvbGRlciBUZXh0IENvbG9yJywgJ0Nob29zZSBhIGNvbG9yIGZvciB0aGUgaGlnaGxpZ2h0ZWQgcm9vdCBmb2xkZXIgdGV4dC4nLCAnaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJUZXh0Q29sb3InKTtcclxuXHRcdH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gSGlnaGxpZ2h0ZWQgUm9vdCBGb2xkZXIgQm9yZGVyIFJhZGl1c1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnUm9vdCBGb2xkZXIgQm9yZGVyIFJhZGl1cycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZXQgdGhlIGJvcmRlciByYWRpdXMgb2YgdGhlIGhpZ2hsaWdodGVkIHJvb3QgZm9sZGVyLicpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLCA1MCwgMSkgIC8vIE1pbiwgTWF4LCBTdGVwXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGFyc2VJbnQodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJCb3JkZXJSYWRpdXMpKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhZGl1c1dpdGhQeCA9IGAke3ZhbHVlfXB4YDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRlZFBhcmVudEZvbGRlckJvcmRlclJhZGl1cyA9IHJhZGl1c1dpdGhQeDtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVTdHlsZXMoKTsgLy8gVXBkYXRlIHN0eWxlcyBpbW1lZGlhdGVseVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpKTsgIC8vIEFkZHMgYSB0b29sdGlwIHNob3dpbmcgdGhlIGN1cnJlbnQgdmFsdWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGhleCBjb2xvciB0byBSR0JcclxuICAgIGhleFRvUmdiKGhleDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgYmlnaW50ID0gcGFyc2VJbnQoaGV4LnNsaWNlKDEpLCAxNik7XHJcbiAgICAgICAgY29uc3QgciA9IChiaWdpbnQgPj4gMTYpICYgMjU1O1xyXG4gICAgICAgIGNvbnN0IGcgPSAoYmlnaW50ID4+IDgpICYgMjU1O1xyXG4gICAgICAgIGNvbnN0IGIgPSBiaWdpbnQgJiAyNTU7XHJcbiAgICAgICAgcmV0dXJuIHsgciwgZywgYiB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBleHRyYWN0IFJHQiB2YWx1ZXMgZnJvbSBSR0JBIHN0cmluZ1xyXG4gICAgZXh0cmFjdFJnYkZyb21SZ2JhKHJnYmE6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcmdiYS5tYXRjaCgvcmdiYT9cXCgoXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspLyk7XHJcbiAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByOiBwYXJzZUludChtYXRjaFsxXSksXHJcbiAgICAgICAgICAgICAgICBnOiBwYXJzZUludChtYXRjaFsyXSksXHJcbiAgICAgICAgICAgICAgICBiOiBwYXJzZUludChtYXRjaFszXSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgcjogMCwgZzogMCwgYjogMCB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBleHRyYWN0IGFscGhhIHZhbHVlIGZyb20gUkdCQSBzdHJpbmdcclxuICAgIGV4dHJhY3RBbHBoYUZyb21SZ2JhKHJnYmE6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcmdiYS5tYXRjaCgvcmdiYT9cXCguKj8sXFxzKihbXFxkLl0rKVxcKS8pO1xyXG4gICAgICAgIHJldHVybiBtYXRjaCA/IHBhcnNlRmxvYXQobWF0Y2hbMV0pIDogMTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBSR0IgdG8gSEVYXHJcbiAgICByZ2JUb0hleChyZ2I6IHsgcjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciB9KSB7XHJcbiAgICAgICAgcmV0dXJuIFwiI1wiICsgKCgxIDw8IDI0KSArIChyZ2IuciA8PCAxNikgKyAocmdiLmcgPDwgOCkgKyByZ2IuYikudG9TdHJpbmcoMTYpLnNsaWNlKDEpO1xyXG4gICAgfVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUF1RDtBQWN2RCxJQUFNLG1CQUE4QztBQUFBLEVBQ2hELHdCQUF3QjtBQUFBLEVBQ3hCLDJCQUEyQjtBQUFBLEVBQzNCLDZCQUE2QjtBQUFBLEVBQ2hDLDRCQUE0QjtBQUFBLEVBQ3pCLHVCQUF1QjtBQUFBLEVBQ3ZCLDhCQUE4QjtBQUFB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
